
## 

/----------------------------------------------
/----------------------------------------------

- **Example**: Scope Leakage
  - Before C++17, another scope can be defined to restrict the usage of variable 
  - After C++17, "if with initializer" is used instead of adding another scope in these  cases. 

/----------------------------------------------

int x = foo(2,5);

if( x > 10 ){
	//...
	g(x);
}

// x is also accessed here !!!

/----------------------------------------------

if( int x = foo(2,5); x > 10 ){
	//...
	g(x);
}

// x is not accessed here !!!

/----------------------------------------------

int *foo(int);
int func(int, int);

int main(){
	if(int *ptr = foo(10); ptr != nullptr){
		//...
	}

	// if(int *ptr = foo(20)){} --> in this case, if(true) or if(false) 
}


/----------------------------------------------
/----------------------------------------------

- **Example**: Fighter class example

#define _CRT_SECURE_NO_WARNINGS
#include<iostream> 
#include<string> 
#include<vector> 
#include<algorithm> 

// fighter.h
/*-------------------------------------------------*/
class Fighter {
public:
	Fighter() {
		msvec.push_back(this);
	}
	Fighter(const std::string &name, int age) : mname{ std::move(name) }, mage{ age }{
		// the address of instance is stored in a vector 
		msvec.push_back(this);
	}
	~Fighter() {
		// iter type --> std::vector<Fighter>::iterator
		// if iter is found in the vector, if with initializer
		if (auto iter = std::find(msvec.begin(), msvec.end(), this); iter != msvec.end())
			msvec.erase(iter);
		else
			std::cerr << "Not found!!!\n";
	}

	Fighter(const Fighter& ref) = delete;
	Fighter& operator=(const Fighter& ref) = delete;
	
	int getAge() const { return mage; }
	std::string getName() const { return mname; }
	void kill();
	void run();
	void ask_help();
private:
	std::string mname = "noname";
	int mage = 0;
	inline static std::vector<Fighter*> msvec{};
};

// fighter.cpp
void Fighter::ask_help() {
	// range based for loop
	for (auto ftr: msvec) {
		if(ftr != this) // it is not the object itself
		std::cout << ftr->mname << " ";
	}
	std::cout << "Help!!!\n";
}

// client code
/*-------------------------------------------------*/
int main() {

	// Static objects
	Fighter f1{ "Mehmet", 25 };
	Fighter f2{ "Ayse", 26 };
	Fighter f3{ "Ece", 27 };
	Fighter f4{ "Utku", 30 };

	// Dynamic objects
	auto pf1 = new Fighter{"Selin", 32};
	auto pf2 = new Fighter{"Özge", 33};
	auto pf3 = new Fighter{"Sinem", 34};
	
	delete pf2;
	delete pf3;

	// asking help for the other live fighters
	f2.ask_help();


	return EXIT_SUCCESS;

	/*
		Mehmet Ece Utku Selin Help!!
	*/
}

/----------------------------------------------
/----------------------------------------------

- **Example**: 01:30 da kaldýk --> range based loop